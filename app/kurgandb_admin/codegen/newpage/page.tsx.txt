import { API_HOST_NAME } from "@/globals";
import $$COMP$$ from "./$$COMP$$";
import { Metadata, ResolvingMetadata } from 'next';

// uncomment for a static title

// export const metadata: Metadata = {
//   title: "This page was autogenerated",
// };

async function getPageData() {

  // providing the data consistency
  return fetch(`${API_HOST_NAME}/$$PATH$$/api`, {
    next: {
      tags: ["page"]
    },

  }).then(e => e.json());
}

export async function generateMetadata(props: Props, parent: ResolvingMetadata): Promise<Metadata> {
  const dbVersion = await getPageData();
  return {
    title: `KurganDB v${dbVersion}`,
  }
}

type Props = {};
export default async function (props: Props) {
  const dbVersion = await getPageData();

  return (
    <div className="h-screen text-center items-center pt-[40vh]">
      <div className="mb-3">{`KurganDB v${dbVersion}`}</div>
      <$$COMP$$></$$COMP$$>
    </div>
  );
}
